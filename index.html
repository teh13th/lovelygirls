---
---
<!DOCTYPE html>
<html>
  <head>
    <title>
      lovely girls
    </title>
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico?">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <style>
      body {
        font-family: monospace;
        color: #4c4848;
      }
      
      .center-block {
        position: absolute;
        bottom: 50%;
        right: 50%;
        transform: translate(50%, 50%);
        -ms-transform: translate(50%, 50%);
        -webkit-transform: translate(50%, 50%);
        -o-transform: translate(50%, 50%);
        -moz-transform: translate(50%, 50%);
        word-break: break-all;
        text-align: center;
        font-size: 2em;
      }
      
      .bottom-center-block {
        position: absolute;
        bottom: 5%;
        right: 50%;
        transform: translate(50%, 0);
        -ms-transform: translate(50%, 0);
        -webkit-transform: translate(50%, 0);
        -o-transform: translate(50%, 0);
        -moz-transform: translate(50%, 0);
        white-space: nowrap;
        text-align: center;
        font-size: 1.5em;
        color: #bbb;
      }
      
      .center-block:hover {
        color: #666b6d;
      }
    </style>
  </head>
  <body>
    <span>D: {{ "now" | date_to_rfc822 }}</span>
    <div id="timerBlock" class="center-block" style="white-space: nowrap;">
        <span class="days">0</span> day(-s)
        <span class="hours">0</span> hour(-s)
        <span class="minutes">0</span> minute(-s)
        <span class="seconds">0</span> second(-s)
    </div>
    
    <div id="someBlock" class="center-block" style="display: none;">
      fdsfsdfdsfsdfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff4f43v445v45435v4v543v5435435434
    </div>
    
    <div class="bottom-center-block">
      https://git.io/vyWFF
    </div>
    
    <script type="text/javascript">
      var timerElementName = 'timerBlock';
      var currentTimeOffset = 0;
      var secondDuration = 1000;
      var endTime = new Date(2017, 2, 7, 17);
      var timeinterval = null;
      
      var clock = document.getElementById(timerElementName);
      var daysSpan = clock.querySelector('.days');
      var hoursSpan = clock.querySelector('.hours');
      var minutesSpan = clock.querySelector('.minutes');
      var secondsSpan = clock.querySelector('.seconds');
      
      function getCurrentTime(callback) {
        var request = new XMLHttpRequest();

        request.onreadystatechange = function() {
          if (request.readyState == XMLHttpRequest.DONE) {
            if (request.status == 200) {
              var json = JSON.parse(request.responseText);
              var currentDateText = json['fulldate'];
              callback(new Date(currentDateText));
            }
          }
        };

        request.open("GET", "https://script.google.com/macros/s/AKfycbyd5AcbAnWi2Yn0xhFRbyzS4qMq1VucMVgVvhul5XqS9HkAyJY/exec?tz=Europe/Moscow", true);
        request.send();
      }
      
      function getTimeRemaining(starttime, endtime) {
        var t = Date.parse(endtime) - Date.parse(starttime) + currentTimeOffset;
        currentTimeOffset = currentTimeOffset + secondDuration;
        var seconds = Math.floor((t / secondDuration) % 60);
        var minutes = Math.floor((t / secondDuration / 60) % 60);
        var hours = Math.floor((t / (secondDuration * 60 * 60)) % 24);
        var days = Math.floor(t / (secondDuration * 60 * 60 * 24));
        return {
          'total': t,
          'days': days,
          'hours': hours,
          'minutes': minutes,
          'seconds': seconds
        };
      }
      
      function updateClock(starttime, endtime) {
        var t = getTimeRemaining(starttime, endtime);

        if (t.total <= 0) {
          daysSpan.innerHTML = 0;
          hoursSpan.innerHTML = 0;
          minutesSpan.innerHTML = 0;
          secondsSpan.innerHTML = 0;

          doSomething();

          return false;
        }
        else {
          daysSpan.innerHTML = t.days;
          hoursSpan.innerHTML = ('0' + t.hours).slice(-2);
          minutesSpan.innerHTML = ('0' + t.minutes).slice(-2);
          secondsSpan.innerHTML = ('0' + t.seconds).slice(-2);

          return true;
        }
      }
      
      function doSomething() {
        clearInterval(timeinterval);
        
        document.getElementById(timerElementName).style.display = 'none';
        document.getElementById('someBlock').style.display = 'block';
      }

      getCurrentTime(function(currentTime) {
        function update() {
          return updateClock(currentTime, endTime);
        };
        
        if (update()) {
          timeinterval = setInterval(update, secondDuration);
        }
      });
    </script>
  </body>
</html>
